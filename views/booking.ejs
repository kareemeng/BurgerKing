<html lang="en">

<%- include('./partials/header.ejs') %>

    <body>
        <!-- Nav Bar Start -->
        <%- include('./partials/nav.ejs') %>
            <!-- Nav Bar End -->


            <!-- Page Header Start -->
            <div class="page-header mb-0">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <h2>Book A Table</h2>
                        </div>
                        <div class="col-12">
                            <a href="/">Home</a>
                            <a href="">Booking</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Page Header End -->


            <!-- Booking Start -->
            <div class="booking">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-7">
                            <div class="booking-content">
                                <div class="section-header">
                                    <p>Book A Table</p>
                                    <h2>Book Your Table For Private Dinners & Happy Hours</h2>
                                </div>
                                <div class="about-text">
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus nec pretium mi. Curabitur facilisis ornare velit non vulputate. Aliquam metus tortor, auctor id gravida condimentum, viverra quis sem.
                                    </p>
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus nec pretium mi. Curabitur facilisis ornare velit non vulputate. Aliquam metus tortor, auctor id gravida condimentum, viverra quis sem. Curabitur non nisl nec nisi scelerisque maximus.
                                        Aenean consectetur convallis porttitor. Aliquam interdum at lacus non blandit.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-5">
                            <div class="booking-form">

                                <!-- start booking-->

                                <div class="control-group">
                                    <form class=" userbooking" method="post" action="/user/book">
                                        <div class="input-group date" id="date" data-target-input="nearest">
                                            <input type="text" class="form-control datetimepicker-input change-format" placeholder="Date " name="date" data-target="#date" data-toggle="datetimepicker" />
                                            <div class="input-group-append" data-target="#date" data-toggle="datetimepicker">
                                                <div class="input-group-text"><i class="far fa-calendar-alt"></i></div>
                                            </div>
                                            <!-- <input type="date" class="form-control datetimepicker-input change-format" placeholder="Date " name="date" /> -->
                                            <!-- <input type="date" data-date="" data-date-format="YYYY MM DD" class="form-control datetimepicker-input" placeholder="Date " name="date"> -->
                                        </div>
                                        <div class="date error" id="dateError"></div>
                                </div>
                                <div class="control-group">
                                    <div class="input-group ">
                                        <select class="custom-select form-control" name="start">
                                            <option selected value="">Time</option>
                                            <option value="0">12 pm</option>
                                            <option value="1">1 pm</option>
                                            <option value="2">2 pm</option>
                                            <option value="3">3 pm</option>
                                            <option value="4">4 pm</option>
                                            <option value="5">5 pm</option>
                                            <option value="6">6 pm</option>
                                            <option value="7">7 pm</option>
                                            <option value="8">8 pm</option>
                                            <option value="9">9 pm</option>
                                            <option value="10">10 pm</option>
                                            <option value="11">11 pm</option>
                                        </select>
                                        <div class="input-group-append">
                                            <div class="input-group-text"><i class="fa fa-chevron-down"></i></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="start error" id="startError"></div>

                                <div class="control-group">
                                    <div class="input-group ">
                                        <select class="custom-select form-control" name="end">
                                            <option selected value="">Time</option>
                                            <option value="0">12 pm</option>
                                            <option value="1">1 pm</option>
                                            <option value="2">2 pm</option>
                                            <option value="3">3 pm</option>
                                            <option value="4">4 pm</option>
                                            <option value="5">5 pm</option>
                                            <option value="6">6 pm</option>
                                            <option value="7">7 pm</option>
                                            <option value="8">8 pm</option>
                                            <option value="9">9 pm</option>
                                            <option value="10">10 pm</option>
                                            <option value="11">11 pm</option>
                                        </select>
                                        <div class="input-group-append">
                                            <div class="input-group-text"><i class="fa fa-chevron-down"></i></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="end error" id="startError"></div>

                                <div class="control-group">
                                    <div class="input-group">
                                        <select class="custom-select form-control" name="guestNo">
                                            <option selected value="">Guest</option>
                                            <option value="1">1 Guest</option>
                                            <option value="2">2 Guest</option>
                                            <option value="3">3 Guest</option>
                                            <option value="4">4 Guest</option>
                                            <option value="5">5 Guest</option>
                                        </select>
                                        <div class="input-group-append">
                                            <div class="input-group-text"><i class="fa fa-chevron-down"></i></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="guestNo error" id="gustError"></div>
                                <div class="control-group">
                                    <div class="input-group">
                                        <select class="custom-select form-control" name="tableNo">
                                            <option selected value="">Table</option>
                                            <option value="1">1 </option>
                                            <option value="2">2 </option>
                                            <option value="3">3 </option>
                                            <option value="4">4 </option>
                                            <option value="5">5 </option>
                                        </select>
                                        <div class="input-group-append">
                                            <div class="input-group-text"><i class="fa fa-chevron-down"></i></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tableNo error" id="tableError"></div>
                                <input type="hidden" name="userinfo" value="<%=currentUser.id %> ">
                                <div>
                                    <button class="btn custom-btn" type="submit">Book Now</button>
                                </div>

                                </form>
                                <!-- end booking-->
                                <script>
                                    const form = document.querySelector('.userbooking');
                                    const dateError = document.querySelector('.date.error');
                                    const startError = document.querySelector('.start.error');
                                    const endError = document.querySelector('.end.error');
                                    const tableError = document.querySelector('.tableNo.error');
                                    const guestError = document.querySelector('.guestNo.error');
                                    const dateformat = document.querySelector('change-format');
                                    form.addEventListener('submit', async(e) => {
                                        e.preventDefault();
                                        // reset error messagsief
                                        dateError.textContent = '';
                                        startError.textContent = '';
                                        endError.textContent = '';
                                        tableError.textContent = '';
                                        guestError.textContent = '';
                                        //get values    
                                        const bookingstart = form.start.value;
                                        const bookingend = form.end.value;
                                        const bookingguestNo = form.guestNo.value;
                                        const bookingtableNo = form.tableNo.value;
                                        const bookinguserid = form.userinfo.value;
                                        var bookingdate = form.date.value;
                                        d = new Date(bookingdate);
                                        dt = d.getDate();
                                        mn = d.getMonth();
                                        mn++;
                                        yy = d.getFullYear();
                                        bookingdate = yy + "-" + mn + "-" + dt;
                                        try {
                                            const res = await fetch('/users/book', {
                                                method: 'POST',
                                                body: JSON.stringify({
                                                    date: bookingdate,
                                                    start: bookingstart,
                                                    end: bookingend,
                                                    guestNo: bookingguestNo,
                                                    tableNo: bookingtableNo,
                                                    userinfo: bookinguserid,
                                                }),
                                                headers: {
                                                    'Content-Type': 'application/json'
                                                },
                                            });
                                            const data = await res.json();
                                            console.log(data);
                                            if (data.errors) {
                                                dateError.textContent = data.errors.date;
                                                startError.textContent = data.errors.start;
                                                endError.textContent = data.errors.end;
                                                tableError.textContent = data.errors.tableNo;
                                                guestError.textContent = data.errors.guestNo;
                                            }
                                            if (data.booking) {
                                                console.log('booked');
                                                location.assign('/menu');
                                            }
                                        } catch (err) {
                                            console.log("err in booking");
                                            console.log(err);
                                        }
                                    })
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Booking End -->


            <!-- Menu Start -->
            <div class="menu">
                <div class="container">
                    <div class="section-header text-center">
                        <p>Food Menu</p>
                        <h2>Delicious Food Menu</h2>
                    </div>
                    <div class="menu-tab">
                        <ul class="nav nav-pills justify-content-center">
                            <li class="nav-item">
                                <a class="nav-link active" data-toggle="pill" href="#burgers">Burgers</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="pill" href="#snacks">Snacks</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="pill" href="#beverages">Beverages</a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div id="burgers" class="container tab-pane active">
                                <div class="row">
                                    <div class="col-lg-7 col-md-12">
                                        <div class="menu-item">
                                            <div class="menu-img">
                                                <img src="menu-burger.jpg" alt="Image">
                                            </div>
                                            <div class="menu-text">
                                                <h3><span>Mini cheese Burger</span> <strong>$9.00</strong></h3>
                                                <p>Lorem ipsum dolor sit amet elit. Phasel nec preti facil</p>
                                            </div>
                                        </div>
                                        <div class="menu-item">
                                            <div class="menu-img">
                                                <img src="menu-burger.jpg" alt="Image">
                                            </div>
                                            <div class="menu-text">
                                                <h3><span>Double size burger</span> <strong>$11.00</strong></h3>
                                                <p>Lorem ipsum dolor sit amet elit. Phasel nec preti facil</p>
                                            </div>
                                        </div>
                                        <div class="menu-item">
                                            <div class="menu-img">
                                                <img src="menu-burger.jpg" alt="Image">
                                            </div>
                                            <div class="menu-text">
                                                <h3><span>Bacon, EGG and Cheese</span> <strong>$13.00</strong></h3>
                                                <p>Lorem ipsum dolor sit amet elit. Phasel nec preti facil</p>
                                            </div>
                                        </div>
                                        <div class="menu-item">
                                            <div class="menu-img">
                                                <img src="menu-burger.jpg" alt="Image">
                                            </div>
                                            <div class="menu-text">
                                                <h3><span>Pulled porx Burger</span> <strong>$18.00</strong></h3>
                                                <p>Lorem ipsum dolor sit amet elit. Phasel nec preti facil</p>
                                            </div>
                                        </div>
                                        <div class="menu-item">
                                            <div class="menu-img">
                                                <img src="menu-burger.jpg" alt="Image">
                                            </div>
                                            <div class="menu-text">
                                                <h3><span>Fried chicken Burger</span> <strong>$22.00</strong></h3>
                                                <p>Lorem ipsum dolor sit amet elit. Phasel nec preti facil</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-5 d-none d-lg-block">
                                        <img src="menu-burger-img.jpg" alt="Image">
                                    </div>
                                </div>
                            </div>
                            <div id="snacks" class="container tab-pane fade">
                                <div class="row">
                                    <div class="col-lg-7 col-md-12">
                                        <div class="menu-item">
                                            <div class="menu-img">
                                                <img src="menu-snack.jpg" alt="Image">
                                            </div>
                                            <div class="menu-text">
                                                <h3><span>Corn Tikki - Spicy fried Aloo</span> <strong>$15.00</strong></h3>
                                                <p>Lorem ipsum dolor sit amet elit. Phasel nec preti facil</p>
                                            </div>
                                        </div>
                                        <div class="menu-item">
                                            <div class="menu-img">
                                                <img src="menu-snack.jpg" alt="Image">
                                            </div>
                                            <div class="menu-text">
                                                <h3><span>Bread besan Toast</span> <strong>$35.00</strong></h3>
                                                <p>Lorem ipsum dolor sit amet elit. Phasel nec preti facil</p>
                                            </div>
                                        </div>
                                        <div class="menu-item">
                                            <div class="menu-img">
                                                <img src="menu-snack.jpg" alt="Image">
                                            </div>
                                            <div class="menu-text">
                                                <h3><span>Healthy soya nugget snacks</span> <strong>$20.00</strong></h3>
                                                <p>Lorem ipsum dolor sit amet elit. Phasel nec preti facil</p>
                                            </div>
                                        </div>
                                        <div class="menu-item">
                                            <div class="menu-img">
                                                <img src="menu-snack.jpg" alt="Image">
                                            </div>
                                            <div class="menu-text">
                                                <h3><span>Tandoori Soya Chunks</span> <strong>$30.00</strong></h3>
                                                <p>Lorem ipsum dolor sit amet elit. Phasel nec preti facil</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-5 d-none d-lg-block">
                                        <img src="menu-snack-img.jpg" alt="Image">
                                    </div>
                                </div>
                            </div>
                            <div id="beverages" class="container tab-pane fade">
                                <div class="row">
                                    <div class="col-lg-7 col-md-12">
                                        <div class="menu-item">
                                            <div class="menu-img">
                                                <img src="menu-beverage.jpg" alt="Image">
                                            </div>
                                            <div class="menu-text">
                                                <h3><span>Single Cup Brew</span> <strong>$7.00</strong></h3>
                                                <p>Lorem ipsum dolor sit amet elit. Phasel nec preti facil</p>
                                            </div>
                                        </div>
                                        <div class="menu-item">
                                            <div class="menu-img">
                                                <img src="menu-beverage.jpg" alt="Image">
                                            </div>
                                            <div class="menu-text">
                                                <h3><span>Caffe Americano</span> <strong>$9.00</strong></h3>
                                                <p>Lorem ipsum dolor sit amet elit. Phasel nec preti facil</p>
                                            </div>
                                        </div>
                                        <div class="menu-item">
                                            <div class="menu-img">
                                                <img src="menu-beverage.jpg" alt="Image">
                                            </div>
                                            <div class="menu-text">
                                                <h3><span>Caramel Macchiato</span> <strong>$15.00</strong></h3>
                                                <p>Lorem ipsum dolor sit amet elit. Phasel nec preti facil</p>
                                            </div>
                                        </div>
                                        <div class="menu-item">
                                            <div class="menu-img">
                                                <img src="menu-beverage.jpg" alt="Image">
                                            </div>
                                            <div class="menu-text">
                                                <h3><span>Standard black coffee</span> <strong>$8.00</strong></h3>
                                                <p>Lorem ipsum dolor sit amet elit. Phasel nec preti facil</p>
                                            </div>
                                        </div>
                                        <div class="menu-item">
                                            <div class="menu-img">
                                                <img src="menu-beverage.jpg" alt="Image">
                                            </div>
                                            <div class="menu-text">
                                                <h3><span>Standard black coffee</span> <strong>$12.00</strong></h3>
                                                <p>Lorem ipsum dolor sit amet elit. Phasel nec preti facil</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-5 d-none d-lg-block">
                                        <img src="menu-beverage-img.jpg" alt="Image">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Menu End -->


            <!-- Footer Start -->
            <div class="footer">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-7">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="footer-contact">
                                        <h2>Our Address</h2>
                                        <p><i class="fa fa-map-marker-alt"></i>123 Street, New York, USA</p>
                                        <p><i class="fa fa-phone-alt"></i>+012 345 67890</p>
                                        <p><i class="fa fa-envelope"></i>info@example.com</p>
                                        <div class="footer-social">
                                            <a href=""><i class="fab fa-twitter"></i></a>
                                            <a href=""><i class="fab fa-facebook-f"></i></a>
                                            <a href=""><i class="fab fa-youtube"></i></a>
                                            <a href=""><i class="fab fa-instagram"></i></a>
                                            <a href=""><i class="fab fa-linkedin-in"></i></a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="footer-link">
                                        <h2>Quick Links</h2>
                                        <a href="">Terms of use</a>
                                        <a href="">Privacy policy</a>
                                        <a href="">Cookies</a>
                                        <a href="">Help</a>
                                        <a href="">FQAs</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-5">
                            <div class="footer-newsletter">
                                <h2>Newsletter</h2>
                                <p>
                                    Lorem ipsum dolor sit amet elit. Quisque eu lectus a leo dictum nec non quam. Tortor eu placerat rhoncus, lorem quam iaculis felis, sed lacus neque id eros.
                                </p>
                                <div class="form">
                                    <input class="form-control" placeholder="Email goes here">
                                    <button class="btn custom-btn">Submit</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="copyright">
                    <div class="container">
                        <p>Copyright &copy; <a href="#">Your Site Name</a>, All Right Reserved.</p>
                        <p>Designed By <a href="https://htmlcodex.com">HTML Codex</a></p>
                    </div>
                </div>
            </div>
            <!-- Footer End -->

            <a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>

            <!-- JavaScript Libraries -->

            <%- include('./partials/footer.ejs') %>
    </body>


</html>